# ==== Web Framework ====
fastapi==0.103.1
starlette==0.27.0
uvicorn[standard]>=0.29,<0.31    # chuẩn hóa kèm uvloop/httptools/websockets/watchfiles

# ==== Database ====
sqlalchemy==2.0.20
asyncpg>=0.28,<0.30              # 0.28.x/0.29.x ổn định cho py>=3.10

# ==== Auth & Security ====
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
bcrypt<4.1                        # tránh lỗi AttributeError: __about__ với passlib
python-multipart>=0.0.6,<0.0.10   # vá lỗi nhỏ, giữ API cũ

# ==== Data Validation & Settings ====
pydantic>=2.7,<2.9                # nhiều bugfix so với 2.3.0, tương thích FastAPI 0.103.x
pydantic-settings>=2.2,<2.3       # bản 2.2.x chạy tốt với pydantic >=2.7

# ==== HTTP Client ====
httpx>=0.25,<0.28                 # 0.27.x ổn; nếu code cũ, vẫn tương thích 0.25.x–0.27.x

# ==== Env ====
python-dotenv>=1.0,<2.0

# ==== (Khuyến nghị phụ thuộc gián tiếp để giảm lỗi khó đoán) ====
typing-extensions>=4.8,<5.0       # tránh lệ thuộc bị kéo version “lạ” ở runtime
anyio>=3.7,<4.0                   # Starlette 0.27.0 dùng anyio 3.x ổn định
